(window.webpackJsonp=window.webpackJsonp||[]).push([[12],{430:function(t,e,n){"use strict";var o={name:"DeptForm",props:{dept_id:String,dept_name:String,location:String,isUpdate:Boolean},data:function(){return{f_dept_id:this.dept_id||"",f_dept_name:this.dept_name||"",f_location:this.location||""}},methods:{checkValue:function(){""==this.f_dept_id||""==this.f_dept_name||""==this.f_location?this.$buefy.toast.open({message:"Form is not valid! Please check the fields.",type:"is-danger",position:"is-bottom"}):this.$emit("onFormSubmit",{dept_id:this.f_dept_id,dept_name:this.f_dept_name,location:this.f_location})}},watch:{dept_id:function(){this.f_dept_id=this.dept_id},dept_name:function(){this.f_dept_name=this.dept_name},location:function(){this.f_location=this.location}}},r=n(15),component=Object(r.a)(o,function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("section",{staticClass:"section"},[n("h1",{staticClass:"subtitle"},[t._v("Department Information")]),n("section",[n("b-field",{attrs:{label:"Department ID"}},[n("b-input",{attrs:{name:"dept_id",required:""},model:{value:t.f_dept_id,callback:function(e){t.f_dept_id=e},expression:"f_dept_id"}})],1),n("b-field",{attrs:{label:"Department Name"}},[n("b-input",{attrs:{name:"dept_name",required:""},model:{value:t.f_dept_name,callback:function(e){t.f_dept_name=e},expression:"f_dept_name"}})],1),n("b-field",{attrs:{label:"Office Location"}},[n("b-input",{attrs:{name:"location",required:""},model:{value:t.f_location,callback:function(e){t.f_location=e},expression:"f_location"}})],1),n("hr"),t.isUpdate?n("b-field",{attrs:{grouped:"","group-multiline":""}},[n("b-button",{on:{click:function(e){return t.$emit("onCancel")}}},[t._v("Cancel")]),n("b-button",{staticClass:"is-primary",attrs:{type:"submit"},on:{click:t.checkValue}},[t._v("Update")])],1):t._e(),t.isUpdate?t._e():n("b-field",{attrs:{grouped:"","group-multiline":""}},[n("b-button",{on:{click:function(e){return t.$emit("onCancel")}}},[t._v("Cancel")]),n("b-button",{staticClass:"is-primary",attrs:{type:"submit"},on:{click:t.checkValue}},[t._v("Create")])],1)],1)])},[],!1,null,null,null);e.a=component.exports},532:function(t,e,n){"use strict";n.r(e);n(33);var o,r,c=n(6),d={name:"UpdateDeptPage",components:{DeptForm:n(430).a},data:function(){return{objId:"",dept_id:"",dept_name:"",location:""}},methods:{fetchDept:(r=Object(c.a)(regeneratorRuntime.mark(function t(){var e;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,this.$axios.$get("/api/v1/g/dept/"+this.$route.params.id);case 3:0==(e=t.sent).status&&(console.log(e),this.objId=e.data._id,this.dept_name=e.data.dept_name,this.dept_id=e.data.dept_id,this.location=e.data.location),t.next=12;break;case 7:t.prev=7,t.t0=t.catch(0),console.log("fail fetch department"),this.$buefy.toast.open({message:"Unknown Department Record",type:"is-warning",position:"is-bottom"}),this.$route.push({path:"/dept"});case 12:case"end":return t.stop()}},t,this,[[0,7]])})),function(){return r.apply(this,arguments)}),submit_check:(o=Object(c.a)(regeneratorRuntime.mark(function t(e){var n,o=this;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return console.log(e),e._id=this.objId,t.prev=2,t.next=5,this.$axios.$post("/api/v1/u/dept/",e);case 5:n=t.sent,console.log(n),0==n.status&&(this.$buefy.toast.open({message:"Department Update Success",type:"is-success",position:"is-bottom"}),setTimeout(function(){o.$router.push({path:"/dept/"+n.data._id})},2500)),t.next=14;break;case 10:t.prev=10,t.t0=t.catch(2),console.warn(t.t0),this.$buefy.toast.open({message:"Department Update Fail",type:"is-danger",position:"is-bottom"});case 14:case"end":return t.stop()}},t,this,[[2,10]])})),function(t){return o.apply(this,arguments)})},beforeMount:function(){this.fetchDept()}},l=n(15),component=Object(l.a)(d,function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"container"},[t._m(0),n("DeptForm",{attrs:{dept_id:t.dept_id,dept_name:t.dept_name,location:t.location,isUpdate:!0},on:{onFormSubmit:t.submit_check,onCancel:function(e){return t.$router.push({path:"/dept/"+t.objId})}}})],1)},[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"section"},[e("div",{staticClass:"hero is-primary is-bold is-12"},[e("div",{staticClass:"hero-body"},[e("div",{staticClass:"container"},[e("h1",{staticClass:"title"},[this._v("Update Department ")]),e("h2",{staticClass:"subtitle"})])])])])}],!1,null,null,null);e.default=component.exports}}]);